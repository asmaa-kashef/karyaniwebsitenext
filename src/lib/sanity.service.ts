import { client } from "./sanity.client";
import { Post } from "../types/sanity"; // ??????? ?????????

class SanityService {
    // ??? ?? ???????? ?? ????? ????? ???????? ?? Post[]
    async getAllPosts(): Promise<Post[]> {
        const query = `*[_type == "post"] | order(publishedAt desc) {
      _id,
      title,
      slug,
      mainImage,
      publishedAt
    }`;
        return await client.fetch(query);
    }

    // ??? ???? ???? ?? ????? ????? ?? Post
    async getPostBySlug(slug: string): Promise<Post> {
        const query = `*[_type == "post" && slug.current == $slug][0]`;
        return await client.fetch(query, { slug });
    }
}

export const sanityService = new SanityService();